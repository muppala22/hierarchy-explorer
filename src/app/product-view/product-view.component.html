<div class="hierarchy-container">
  <div class="controls">
    <button class="control-btn expand" (click)="expandAll()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 5v14M5 12h14"/>
      </svg>
      <span>Expand All</span>
    </button>
    <button class="control-btn collapse" (click)="collapseAll()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M5 12h14"/>
      </svg>
      <span>Collapse All</span>
    </button>
    <button class="control-btn back" (click)="goToSearch()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      <span>Back to Search</span>
    </button>
  </div>

  @if (isSearchView) {
    @if (searchResults.length > 0) {
      @for (result of searchResults; track result.id) {
        <app-product-node
          [node]="result"
          [isSearchResult]="true">
        </app-product-node>
      }
    } @else {
      <div class="no-results">
        <p>No results found for "{{searchQuery}}"</p>
      </div>
    }
  } @else {
    @for (node of product; track node.id) {
      <app-product-node
        [node]="node"
        [isSearchResult]="false">
      </app-product-node>
    }
  }
</div>
